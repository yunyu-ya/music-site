<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>天空突然下起雨</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #121212;
      color: #f44336;
      margin: 0;
      padding: 1rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    header {
      text-align: center;
      margin-bottom: 1rem;
    }
    .track {
      background: #222;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .track h2 {
      margin: 0 0 0.5rem 0;
    }
    .controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    button.play-btn {
      background: #f44336;
      border: none;
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      user-select: none;
      min-width: 70px;
      font-weight: bold;
    }
    button.play-btn.playing {
      background: #c62828;
    }
    input[type=range] {
      flex-grow: 1;
      cursor: pointer;
    }
    .time-display {
      width: 80px;
      text-align: center;
      font-size: 0.9rem;
      user-select: none;
      color: #ddd;
    }
    #album-art {
      width: 100%;
      max-height: 300px;
      object-fit: contain;
      border-radius: 10px;
      margin-bottom: 1rem;
      box-shadow: 0 0 15px #f4433633;
    }
  </style>
</head>
<body>
  <header>
    <h1>宇夜的音樂作品集</h1>
  </header>

  <img id="album-art" src="https://raw.githubusercontent.com/yunyu-ya/music-site/音樂/剪影.png" alt="專輯封面" />

  <div id="tracks-container">
    <section class="track" data-audio="https://raw.githubusercontent.com/yunyu-ya/music-site/音樂/《深井》.mp3">
      <h2>《深井》</h2>
      <button class="play-btn" aria-label="播放 《深井》">▶️ Play</button>
      <p>融入日系風味的旋律，帶有濃厚的情感。</p>
    </section>

    <section class="track" data-audio="https://raw.githubusercontent.com/yunyu-ya/music-site/音樂/《聽不見你了》-男女合唱.mp3">
      <h2>《聽不見你了》-男女合唱</h2>
      <button class="play-btn" aria-label="播放 《聽不見你了》-男女合唱">▶️ Play</button>
      <p>一首感性的作品，男女深情對唱。</p>
    </section>

    <section class="track" data-audio="https://raw.githubusercontent.com/yunyu-ya/music-site/音樂/《最後一頁》.mp3">
      <h2>《最後一頁》</h2>
      <button class="play-btn" aria-label="播放 《最後一頁》">▶️ Play</button>
      <p>帶有故事感的旋律，帶你翻開最後一頁。</p>
    </section>

    <section class="track"data-audio="https://raw.githubusercontent.com/yunyu-ya/music-site/a643c1beb5754f9aafedb5164e7cff95760e8699/《當你不記得我》%20.mp3"
">
      <h2>《當你不記得我》</h2>
      <button class="play-btn" aria-label="播放 《當你不記得我》">▶️ Play</button>
      <p>感傷的抒情曲，觸動心弦。</p>
    </section>
  </div>

  <div class="controls">
    <button id="prev-btn">⏪</button>
    <button id="main-play-btn">▶️</button>
    <button id="next-btn">⏩</button>
    <span class="time-display" id="current-time">0:00</span>
    <input type="range" id="progress-bar" min="0" max="100" value="0" />
    <span class="time-display" id="duration">0:00</span>
  </div>

  <input type="range" id="volume-bar" min="0" max="100" value="100" style="width: 100%; margin-top: 0.5rem;" />

  <audio id="audio-player" preload="auto"></audio>

  <script>
    const audioPlayer = document.getElementById('audio-player');
    const playButtons = document.querySelectorAll('.play-btn');
    const mainPlayBtn = document.getElementById('main-play-btn');
    const progressBar = document.getElementById('progress-bar');
    const volumeBar = document.getElementById('volume-bar');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const albumArt = document.getElementById('album-art');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');

    let currentTrackIndex = -1;
    let tracks = [];

    // 初始化 tracks 陣列
    playButtons.forEach((btn, index) => {
      const trackSection = btn.closest('.track');
      tracks.push({
        audio: trackSection.getAttribute('data-audio'),
        title: trackSection.querySelector('h2').textContent
      });

      btn.addEventListener('click', () => {
        if(currentTrackIndex === index){
          if(audioPlayer.paused){
            audioPlayer.play();
            updatePlayBtn(btn, true);
            mainPlayBtn.textContent = '⏸';
          } else {
            audioPlayer.pause();
            updatePlayBtn(btn, false);
            mainPlayBtn.textContent = '▶️';
          }
        } else {
          loadTrack(index);
          playTrack();
        }
      });
    });

    function loadTrack(index){
      currentTrackIndex = index;
      audioPlayer.src = tracks[index].audio;
      updateAllPlayButtons();
      mainPlayBtn.textContent = '⏸';
      // 如果你有專輯封面，這邊可以換
      // albumArt.src = 對應圖片路徑
    }

    function playTrack(){
      audioPlayer.play().catch(() => {
        alert('無法播放音樂檔案');
      });
      updateAllPlayButtons(true);
      mainPlayBtn.textContent = '⏸';
    }

    function pauseTrack(){
      audioPlayer.pause();
      updateAllPlayButtons(false);
      mainPlayBtn.textContent = '▶️';
    }

    mainPlayBtn.addEventListener('click', () => {
      if(currentTrackIndex === -1 && tracks.length > 0){
        loadTrack(0);
        playTrack();
      } else if(audioPlayer.paused){
        playTrack();
      } else {
        pauseTrack();
      }
    });

    prevBtn.addEventListener('click', () => {
      if(tracks.length === 0) return;
      currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
      loadTrack(currentTrackIndex);
      playTrack();
    });

    nextBtn.addEventListener('click', () => {
      if(tracks.length === 0) return;
      currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
      loadTrack(currentTrackIndex);
      playTrack();
    });

    audioPlayer.addEventListener('ended', () => {
      nextBtn.click();
    });

    audioPlayer.addEventListener('timeupdate', () => {
      if(audioPlayer.duration){
        let progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
        progressBar.value = progressPercent;
        currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
        durationEl.textContent = formatTime(audioPlayer.duration);
      }
    });

    progressBar.addEventListener('input', () => {
      if(audioPlayer.duration){
        let seekTime = (progressBar.value / 100) * audioPlayer.duration;
        audioPlayer.currentTime = seekTime;
      }
    });

    volumeBar.addEventListener('input', () => {
      audioPlayer.volume = volumeBar.value / 100;
    });

    function updatePlayBtn(button, isPlaying){
      if(isPlaying){
        button.textContent = '⏸ Pause';
        button.classList.add('playing');
      } else {
        button.textContent = '▶️ Play';
        button.classList.remove('playing');
      }
    }

    function updateAllPlayButtons(isPlaying){
      playButtons.forEach((btn, idx) => {
        updatePlayBtn(btn, idx === currentTrackIndex && isPlaying);
      });
    }

    function formatTime(seconds){
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }
  </script>
</body>
</html>


