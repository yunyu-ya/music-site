<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>宇夜的音樂作品集</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;

      background-color: #0a0a0a;
      background-image:
        linear-gradient(rgba(10,10,10,0.75), rgba(10,10,10,0.75)),
        url('https://raw.githubusercontent.com/yunyu-ya/music-site/3cae4b304079928255ec3a2845001e25a5337061/%E5%89%AA%E5%BD%B1.png');
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;

      color: #f44336;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: url('https://cdn-icons-png.flaticon.com/512/2917/2917999.png');
      background-repeat: repeat;
      background-size: 100px 100px;
      opacity: 0.05;
      pointer-events: none;
      z-index: 0;
    }

    header {
      padding: 2rem;
      text-align: center;
      background: #0f0f12cc;
      box-shadow: 0 0 10px #f4433666;
      color: #f44336;
      position: relative;
      z-index: 1;
    }

    header h1 {
      margin: 0;
      font-weight: 700;
      font-size: 3rem;
      text-shadow:
        0 0 6px #f44336cc,
        0 0 12px #ff7961cc;
    }

    .subtitle {
      margin-top: 0.5rem;
      font-style: italic;
      color: #d6735c;
    }

    main {
      flex: 1;
      padding: 2rem 1rem 4rem;
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    .track {
      background: #1b1b1bcc;
      border-radius: 12px;
      padding: 1.8rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 0 12px #f4433666;
      transition: background 0.3s ease;
    }

    .track:hover {
      background: #2a0a0acc;
    }

    .track h2 {
      margin: 0 0 0.6rem;
      color: #f44336;
      font-weight: 600;
      text-shadow: 0 0 3px #f4433666;
    }

    .track p {
      margin: 0.5rem 0 1rem;
      font-size: 1rem;
      color: #f1a89ccc;
      line-height: 1.4;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-top: 0.8rem;
    }

    .play-btn {
      background: #f44336;
      border: none;
      padding: 0.6rem 1.4rem;
      font-size: 1.1rem;
      border-radius: 30px;
      color: #1b1b1b;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      user-select: none;
      box-shadow: 0 0 8px #f44336aa;
      min-width: 80px;
    }

    .play-btn:hover {
      background: #ff7961;
      transform: scale(1.1);
    }

    .play-btn:focus {
      outline: none;
      box-shadow: 0 0 12px 3px #f44336dd;
    }

    .play-btn.playing {
      background: #a03628;
      color: #fff;
      transform: scale(1.15);
      box-shadow: 0 0 14px #a03628cc;
    }

    input[type=range] {
      -webkit-appearance: none;
      width: 150px;
      height: 6px;
      border-radius: 3px;
      background: #ff7961;
      cursor: pointer;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #a03628;
      cursor: pointer;
      border: 1px solid #6b1500;
      margin-top: -5px;
    }
    input[type=range]:focus {
      outline: none;
      box-shadow: 0 0 8px 2px #f44336cc;
    }

    .time-display {
      color: #f1a89c;
      font-size: 0.9rem;
      width: 70px;
      text-align: center;
      user-select: none;
    }

  </style>
</head>
<body>
  <header>
    <h1>宇夜</h1>
    <p class="subtitle">一起聽聽不一樣的味道</p>
  </header>

  <main>
    <section class="track" data-audio="shenjing.mp3">
      <h2>《深井》</h2>
      <div class="controls">
        <button class="play-btn" aria-label="播放 《深井》">▶️ Play</button>
        <input type="range" class="progress" min="0" max="100" value="0" step="1" aria-label="播放進度" />
        <span class="time-display">00:00 / 00:00</span>
        <input type="range" class="volume" min="0" max="1" step="0.01" value="0.7" aria-label="音量調整" />
      </div>
      <p>融入日系風味的旋律，帶有濃厚的情感。</p>
    </section>

    <section class="track" data-audio="listen-no-more-duet.mp3">
      <h2>《聽不見你了》-男女合唱</h2>
      <div class="controls">
        <button class="play-btn" aria-label="播放 《聽不見你了》-男女合唱">▶️ Play</button>
        <input type="range" class="progress" min="0" max="100" value="0" step="1" aria-label="播放進度" />
        <span class="time-display">00:00 / 00:00</span>
        <input type="range" class="volume" min="0" max="1" step="0.01" value="0.7" aria-label="音量調整" />
      </div>
      <p>一首感性的作品，男女深情對唱。</p>
    </section>

    <section class="track" data-audio="last-page.mp3">
      <h2>《最後一頁》</h2>
      <div class="controls">
        <button class="play-btn" aria-label="播放 《最後一頁》">▶️ Play</button>
        <input type="range" class="progress" min="0" max="100" value="0" step="1" aria-label="播放進度" />
        <span class="time-display">00:00 / 00:00</span>
        <input type="range" class="volume" min="0" max="1" step="0.01" value="0.7" aria-label="音量調整" />
      </div>
      <p>帶有故事感的旋律，帶你翻開最後一頁。</p>
    </section>

    <section class="track" data-audio="forgot-me.mp3">
      <h2>《當你不記得我》</h2>
      <div class="controls">
        <button class="play-btn" aria-label="播放 《當你不記得我》">▶️ Play</button>
        <input type="range" class="progress" min="0" max="100" value="0" step="1" aria-label="播放進度" />
        <span class="time-display">00:00 / 00:00</span>
        <input type="range" class="volume" min="0" max="1" step="0.01" value="0.7" aria-label="音量調整" />
      </div>
      <p>感傷的抒情曲，觸動心弦。</p>
    </section>
  </main>

  <audio id="audio-player"></audio>

  <script>
    const audioPlayer = document.getElementById('audio-player');
    const tracks = document.querySelectorAll('.track');

    let currentTrack = null;
    let currentBtn = null;
    let progressSlider = null;
    let volumeSlider = null;
    let timeDisplay = null;

    // 格式化秒數為 mm:ss
    function formatTime(seconds) {
      const m = Math.floor(seconds / 60).toString().padStart(2, '0');
      const s = Math.floor(seconds % 60).toString().padStart(2, '0');
      return `${m}:${s}`;
    }

    tracks.forEach(track => {
      const btn = track.querySelector('.play-btn');
      const progress = track.querySelector('.progress');
      const volume = track.querySelector('.volume');
      const time = track.querySelector('.time-display');
      const audioSrc = track.getAttribute('data-audio');

      // 初始化音量滑桿
      volume.value = 0.7;

      btn.addEventListener('click', () => {
        // 同一首正在播放 => 暫停
        if (currentTrack === track && !audioPlayer.paused) {
          audioPlayer.pause();
          updateButton(btn, false);
          return;
        }

        // 不同曲目
        if (currentTrack !== track) {
          if (currentBtn) updateButton(currentBtn, false);
          currentTrack = track;
          currentBtn = btn;
          progressSlider = progress;
          volumeSlider = volume;
          timeDisplay = time;

          audioPlayer.src = audioSrc;
          audioPlayer.load();
          audioPlayer.volume = volume.value;
          audioPlayer.play().catch(() => {
            alert('無法載入音樂檔案！');
            updateButton(btn, false);
          });
          updateButton(btn, true);

          // 重置進度條與時間顯示
          progress.value = 0;
          time.textContent = `00:00 / 00:00`;
        } else {
          // 同首暫停後再播放
          audioPlayer.play().catch(() => {
            alert('無法載入音樂檔案！');
            updateButton(btn, false);
          });
          updateButton(btn, true);
        }
      });

      // 調整音量
      volume.addEventListener('input', () => {
        if (track === currentTrack) {
          audioPlayer.volume = volume.value;
        }
      });

      // 拖曳進度條跳轉
      progress.addEventListener('input', () => {
        if (track === currentTrack && audioPlayer.duration) {
          const seekTime = (progress.value / 100) * audioPlayer.duration;
          audioPlayer.currentTime = seekTime;
        }
      });
    });

    // 音訊播放時間更新
    audioPlayer.addEventListener('timeupdate', () => {
      if (!currentTrack) return;
      if (!audioPlayer.duration) return;

      const currentTime = audioPlayer.currentTime;
      const duration = audioPlayer.duration;

      // 更新時間顯示
      timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;

      // 更新進度條
      const percent = (currentTime / duration) * 100;
      progressSlider.value = percent;
    });

    // 播放結束時按鈕狀態回復
    audioPlayer.addEventListener('ended', () => {
      if (currentBtn) {
        updateButton(currentBtn, false);
      }
      currentTrack = null;
      currentBtn = null;
      progressSlider = null;
      volumeSlider = null;
      timeDisplay = null;
    });

    function updateButton(button, isPlaying) {
      button.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';
      button.classList.toggle('playing', isPlaying);
    }
  </script>
</body>
</html>

